# Конспект лекции: Интеграция БД с GUI

 1. Цель интеграции
Переход от изолированной базы данных и интерфейса к связанной системе, где GUI взаимодействует с БД через промежуточные слои

 2. Базовая ошибка при интеграции
- Написание SQL-запросов напрямую в коде интерфейса
- Отсутствие обработки ошибок
- Блокировка интерфейса во время выполнения запросов
- Смешивание ответственности разных компонентов

 3. Архитектурный принцип
- GUI: только сбор данных и вызов методов
- Repository: работа с базой данных (только SQL)
- Разделение ответственности между слоями приложения

 4. Основная проблема интеграции
GUI работает по событийной модели:
- Пользователь нажимает кнопку
- Выбирает строку
- Закрывает окно

Проблемы внутри обработчика событий:
- Долгие операции
- Запросы к БД
- Сетевые сбои

 5. Поток выполнения
GUI обычно работает в одном главном потоке - требуется асинхронность или отдельные потоки для долгих операций

 6. Простейшая схема интеграции
1. Пользователь вводит данные - GUI собирает значения
2. Нажатие кнопки - вызов метода Repository
3. После операции:
  - Перезагрузка данных
  - Обновление таблицы
  - Показ уведомления

 7. Управление состоянием
Состояние в GUI может храниться как:
- DataFrame
- Список объектов
- Модель таблицы

 8. Обновление таблицы
Алгоритм:
1. Получить данные из Repository
2. Очистить таблицу
3. Перерисовать строки с новыми данными

 9. Обработка ошибок
- Ошибка БД не должна падать в консоль или закрывать приложение
- Должна ловиться в Controller
- Отображаться пользователю понятным сообщением

 10. UX-паттерны при работе с БД
- Отключать кнопки во время запроса
- Показывать индикатор загрузки
- Подтверждать удаление
- Сообщать об успешной операции

 11. Асинхронность в масштабируемых приложениях
- Использование threading
- Использование async/await
- Использование очередей

 12. Мини-архитектура для учебного проекта
- Service: обработка исключений, валидация данных
- Repository: только SQL-запросы

 13. Интеграционные проблемы
- Потеря соединения с БД
- Конфликт данных при одновременном доступе
- Изменение удаленной записи другим пользователем

GUI должен корректно реагировать на эти ситуации, обновлять данные и не вводить пользователя в заблуждение

 14. Чек-лист корректной интеграции
- [ ] Не писать SQL в GUI
- [ ] Обновлять состояние после операций
- [ ] Обрабатывать ошибки
- [ ] Понимать и избегать блокировки интерфейса
- [ ] Соблюдать слоистую архитектуру
